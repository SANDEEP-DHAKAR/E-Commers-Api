<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KFC Project - Fakestore</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    body {
      background-color: #f8f9fa;
    }

    header {
      background: linear-gradient(90deg, #d61c1c, #ff4c4c);
    }

    #catalog .card {
      transition: transform 0.2s;
    }

    #catalog .card:hover {
      transform: scale(1.05);
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
    }
  </style>

  <script>
    let cartCount = 0;

    function LoadProducts(category = "All") {
      let url = "https://fakestoreapi.com/products";
      if (category !== "All") {
        url = `https://fakestoreapi.com/products/category/${category}`;
      }

      document.getElementById("catalog").innerHTML = "";
      document.getElementById("productCount").innerText = "Loading products...";

      fetch(url)
        .then(response => response.json())
        .then(data => {
          document.getElementById("productCount").innerText = `Showing ${data.length} Products`;

          data.forEach(item => {
            let div = document.createElement("div");
            div.className = "card m-2 p-2";
            div.style.width = "200px";
            div.innerHTML = `
              <img src="${item.image}" class="card-img-top" alt="product" style="height:150px; object-fit:contain; background:#fff;">
              <div class="card-header" style="height:120px; overflow:hidden;">
                <p class="small mb-0">${item.title}</p>
              </div>
              <div class="card-body">
                <dl class="mb-0">
                  <dt>Price</dt>
                  <dd>â‚¹ ${item.price}</dd>
                  <dt>Rating</dt>
                  <dd>
                    <span class="bi bi-star-fill text-success"></span>
                    ${item.rating.rate} [${item.rating.count}]
                  </dd>
                </dl>
              </div>
              <div class="card-footer">
                <button onclick="addToCart()" class="btn btn-danger w-100">
                  <span class="bi bi-cart4"></span> Add to Cart
                </button>
              </div>
            `;
            document.getElementById("catalog").appendChild(div);
          });
        })
        .catch(err => console.error(err));
    }

    function LoadCategories() {
      fetch("https://fakestoreapi.com/products/categories")
        .then(response => response.json())
        .then(data => {
          data.unshift("All"); // All option add karo
          let select = document.querySelector("select");

          data.forEach(item => {
            let option = document.createElement("option");
            option.text = item.toUpperCase(); // dikhane ke liye readable
            option.value = item; // API ke liye exact value
            select.appendChild(option);
          });

          select.addEventListener("change", function () {
            LoadProducts(this.value);
          });
        })
        .catch(err => console.error(err));
    }

    function addToCart() {
      cartCount++;
      document.getElementById("cartButton").innerText = `[ ${cartCount} ] Your Cart Items`;
    }

    function bodyload() {
      LoadProducts();
      LoadCategories();
    }
  </script>
</head>

<body onload="bodyload()" class="container-fluid">
  <header class="p-3 text-white text-center rounded-bottom">
    <h2 class="m-0"><i class="bi bi-basket-fill"></i> Fakestore API</h2>
  </header>

  <div class="row mt-3">
    <div class="col-2">
      <label class="form-label">Select Category</label>
      <select class="form-select"></select>
    </div>

    <div class="col-8">
      <h5 id="productCount" class="text-muted mb-2"></h5>
      <div id="catalog" class="d-flex flex-wrap overflow-auto" style="height: 500px;"></div>
    </div>

    <div class="col-2">
      <button id="cartButton" class="btn btn-danger w-100">[ 0 ] Your Cart Items</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
